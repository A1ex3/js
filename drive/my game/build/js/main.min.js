$(function(){var n=document.querySelector(".score"),r=document.querySelector(".start"),s=document.querySelector(".gameArea"),c=document.createElement("div");c.classList.add("car"),r.addEventListener("click",function(){r.classList.add("hide"),s.innerHTML="";for(var e=0;e<i(100);e++){var t=document.createElement("div");t.classList.add("line"),t.style.top=100*e+"px",t.y=100*e,s.appendChild(t)}for(var o=0;o<i(100*d.traffic);o++){var n=document.createElement("div");n.classList.add("enemy"),n.y=-100*d.traffic*(o+1),n.style.left=Math.floor(Math.random()*(s.offsetWidth-50))+"px",n.style.top=n.y+"px",n.style.background='transparent url("images/content/enemy2.png") center / cover  no-repeat',s.appendChild(n)}d.score=0,d.start=!0,s.appendChild(c),c.style.left=s.offsetWidth/2-c.offsetWidth/2,c.style.top="auto",c.style.bottom="10px",d.x=c.offsetLeft,d.y=c.offsetTop,requestAnimationFrame(a)}),document.addEventListener("keydown",function(e){e.preventDefault(),t[e.key]=!0}),document.addEventListener("keyup",function(e){e.preventDefault(),t[e.key]=!1});var t={ArrowUp:!1,ArrowDown:!1,ArrowRight:!1,ArrowLeft:!1},d={start:!1,score:0,speed:5,traffic:3};function i(e){return document.documentElement.clientHeight/e+1}function a(){d.start&&(d.score+=d.speed,n.innerHTML="SCORE<br>"+d.score,document.querySelectorAll(".line").forEach(function(e){e.y+=d.speed,e.style.top=e.y+"px",e.y>=document.documentElement.clientHeight&&(e.y=-100)}),document.querySelectorAll(".enemy").forEach(function(e){var t=c.getBoundingClientRect(),o=e.getBoundingClientRect();t.top<=o.bottom&&t.right>=o.left&&t.left<=o.right&&t.bottom>=o.top&&(d.start=!1,console.warn("ДТП"),r.classList.remove("hide"),r.style.top=n.offsetHeight),e.y+=d.speed/2,e.style.top=e.y+"px",e.y>=document.documentElement.clientHeight&&(e.y=-100*d.traffic,e.style.left=Math.floor(Math.random()*(s.offsetWidth-50))+"px")}),t.ArrowLeft&&0<d.x&&(d.x-=d.speed),t.ArrowRight&&d.x<s.offsetWidth-c.offsetWidth&&(d.x+=d.speed),t.ArrowUp&&0<d.y&&(d.y-=d.speed),t.ArrowDown&&d.y<s.offsetHeight-c.offsetHeight&&(d.y+=d.speed),c.style.left=d.x+"px",c.style.top=d.y+"px",requestAnimationFrame(a))}console.log(200)});